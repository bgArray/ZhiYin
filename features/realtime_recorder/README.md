# 实时录音机功能说明

## 功能概述

实时录音机是一个能够实时录制音频并显示波形和基频分析的工具。它可以帮助用户：

1. 实时录制音频输入
2. 实时显示音频波形
3. 实时提取并显示基频(F0)
4. 提供直观的视觉反馈

## 使用方法

1. 启动"知音"应用程序
2. 在左侧导航栏中点击"实时录音机"
3. 在录音机窗口中点击"开始录音"按钮
4. 对着麦克风说话或唱歌
5. 观察实时波形和基频变化
6. 点击"停止录音"结束录制

## 界面说明

### 录音控制区域
- **开始/停止录音按钮**: 控制录音的开始和停止
- **状态显示**: 显示当前录音状态

### 实时显示区域
- **音频波形**: 显示实时音频波形，蓝色线条表示音频振幅
- **基频(F0)分析**: 显示实时基频曲线，金黄色线条表示基频变化

### 录音设置区域
- **采样率**: 显示当前录音采样率(16000 Hz)
- **缓冲区大小**: 显示音频缓冲区大小(1024样本)
- **FFT窗口大小**: 显示FFT分析窗口大小(2048样本)

## 技术实现

### 音频录制
- 使用PyAudio库进行实时音频录制
- 采样率设置为16000 Hz，适合语音分析
- 使用回调函数处理音频流

### 波形显示
- 使用自定义WaveformDisplay组件
- 实时绘制音频波形，提供视觉反馈
- 支持动态更新和流畅显示

### 基频提取
- 使用librosa.pyin算法提取基频
- 基频检测范围：50-500 Hz
- 实时更新基频曲线显示

## 注意事项

1. 确保麦克风已正确连接并设置为默认录音设备
2. 录音时请保持环境安静，以获得更好的基频检测结果
3. 基频检测对语音效果最佳，乐器可能需要调整检测参数
4. 如果录音启动失败，请检查音频设备权限

## 故障排除

### 录音无法启动
1. 检查麦克风是否正确连接
2. 确认系统音频权限设置
3. 尝试重新启动应用程序

### 基频显示不准确
1. 确保录音环境相对安静
2. 尝试调整与麦克风的距离
3. 基频检测主要针对人声优化，其他声音可能不够准确

### 波形显示异常
1. 检查音频输入设备是否工作正常
2. 尝试调整系统音频输入级别
3. 重启应用程序